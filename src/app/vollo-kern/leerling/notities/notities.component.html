<div class="notitieForm">
  <form [formGroup]="form">
    <mat-form-field>
    <textarea matInput
              formControlName="notitie"
              placeholder="(Nieuwe notitie)"></textarea>
      <mat-error *ngIf="form.get('notitie').invalid">Typ een nieuwe notitie om op te slaan</mat-error>
    </mat-form-field>
    <button mat-raised-button color="primary" type="button" (click)="opslaan()">Opslaan</button>
    <button mat-raised-button type="button" (click)="form.reset()" *ngIf="form.dirty">Annuleren</button>
  </form>
</div>
<div class="notities" *ngIf="(notities$ | async).length > 0 || form.get('notitie').value">
  <mat-card *ngIf="!form.get('notitie').pristine && form.get('notitie').value"
            [@nieuweNotitie]="form.get('notitie').value">
    <mat-card-header>
      <mat-card-title>
        Nieuwe notitie
      </mat-card-title>
    </mat-card-header>
    <mat-card-content>
      <markdown [data]="form.get('notitie').value"></markdown>
    </mat-card-content>
  </mat-card>
  <mat-card *ngFor="let notitie of notities$ | async">
    <mat-card-header>
      <mat-card-title>
        {{notitie.datum | date : 'dd-MM-yyyy HH:mm'}}
      </mat-card-title>
      <mat-card-subtitle>
        {{notitie.medewerker.voornaam}} {{notitie.medewerker.tussenvoegsel}} {{notitie.medewerker.achternaam}}
      </mat-card-subtitle>
    </mat-card-header>
    <mat-card-content>
      <markdown [data]="notitie.tekst"></markdown>
    </mat-card-content>
  </mat-card>
</div>
